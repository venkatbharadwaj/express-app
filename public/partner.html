<!DOCTYPE html>
<html>
<body>
<div id="cobrowsertabcontainer">
Enter Session Code: <input type="text" id="cobrowsesessioncode" name="cobrowsesessioncode" placeholder="Session Code">
<br/>
Enter Agent Id: <input type="text" id="agentid" name="agentid" placeholder="Agent ID">
<br/>
Language: <input type="text" id="language" name="agentid" placeholder="Languge Code">
<br/>
<input type="button" id="Connect" name="Connect" value="Connect" onclick="Connect();">
<input type="button" id="ClearFrame" name="ClearFrame" value="Clear Frame" onclick="clearFrame(); ">
</div>

<script type="text/javascript" src="http://localhost:8000/scripts/final/generatePartnerSessionUrl.js"></script>

<script type="text/javascript">
console.log("window.fireflyAPI :"+JSON.stringify(window.fireflyAPI))
function startCoBrowsingSession(session_code, api_key, agentid) {
  window.fireflyAPI.language=document.getElementById("language").value;

  console.log("window.fireflyAPI.secureUrl :"+window.fireflyAPI.secureUrl)
  window.fireflyAPI.serverHostUrl='localhost:8000';
  window.fireflyAPI.secureUrl=false;
  window.fireflyAPI.viewOnly=true;

  session_code = session_code.replace(/-/g,"");
  console.log("session_code  :"+session_code);
  console.log("api_key  :"+api_key);
  var ffURL = fireflyAPI.generateSessionUrl(session_code, api_key, agentid).replace('https:','http:');

  //window.location = ffURL;
  console.log("cobrowsing URL - route :"+ffURL);
//  window.open(ffURL);
  document.getElementById("cobrowsing_content").src=ffURL;
}

function Connect(){
  var cobrowsesessioncode = document.getElementById("cobrowsesessioncode").value;
  var agentId = document.getElementById("agentid").value;
  startCoBrowsingSession(cobrowsesessioncode, "bcMb8kW4B6Pa32pSo3JHG7TG", agentId);
}
function clearFrame(){
  document.getElementById("cobrowsing_content").src="about:blank";
}
</script>
<br>
<iframe id="cobrowsing_content" style="left:0px; width:100%; height: 100%; position:fixed; border:0px">
</iframe>
</body>
</html>
